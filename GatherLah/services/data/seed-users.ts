import { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';
import { db, COLLECTIONS } from '@/services/firebase/config';
import { AccountType } from '@/types/user.types';

const SAMPLE_USERS = [
  {
    id: 'sample_aisha_tan',
    email: 'aisha.tan@example.com',
    username: 'aishatan',
    displayName: 'Aisha Tan',
    avatar: 'üé®',
    bio: 'Art lover & yoga enthusiast. Always up for creative challenges!',
    interests: ['Art', 'Yoga', 'Photography', 'Music', 'Cooking'],
    level: 5,
    experiencePoints: 720,
    currentStreak: 12,
    longestStreak: 18,
    totalEventsJoined: 8,
    totalEventsCreated: 2,
    wellnessScore: 88,
    isOnline: true,
  },
  {
    id: 'sample_ryan_koh',
    email: 'ryan.koh@example.com',
    username: 'ryankoh',
    displayName: 'Ryan Koh',
    avatar: 'üéÆ',
    bio: 'Gamer and part-time coder. Let\'s squad up!',
    interests: ['Gaming', 'Coding', 'Tech', 'Anime', 'Board Games'],
    level: 7,
    experiencePoints: 1250,
    currentStreak: 24,
    longestStreak: 30,
    totalEventsJoined: 15,
    totalEventsCreated: 4,
    wellnessScore: 76,
    isOnline: false,
  },
  {
    id: 'sample_mei_lin',
    email: 'mei.lin@example.com',
    username: 'meilin',
    displayName: 'Mei Lin',
    avatar: 'üå∏',
    bio: 'Bookworm and bubble tea addict. Love cosy hangouts!',
    interests: ['Reading', 'Writing', 'Music', 'Cooking', 'Volunteering'],
    level: 4,
    experiencePoints: 520,
    currentStreak: 7,
    longestStreak: 14,
    totalEventsJoined: 6,
    totalEventsCreated: 1,
    wellnessScore: 92,
    isOnline: true,
  },
  {
    id: 'sample_danish_ali',
    email: 'danish.ali@example.com',
    username: 'danishali',
    displayName: 'Danish Ali',
    avatar: 'üèÄ',
    bio: 'Basketball & fitness. Weekend hiker. Looking for gym buddies.',
    interests: ['Basketball', 'Fitness', 'Hiking', 'Running', 'Cooking'],
    level: 6,
    experiencePoints: 980,
    currentStreak: 15,
    longestStreak: 22,
    totalEventsJoined: 12,
    totalEventsCreated: 3,
    wellnessScore: 85,
    isOnline: false,
  },
  {
    id: 'sample_sarah_ng',
    email: 'sarah.ng@example.com',
    username: 'sarahng',
    displayName: 'Sarah Ng',
    avatar: 'üéµ',
    bio: 'Music producer & cat mom. Open mic nights are my thing.',
    interests: ['Music', 'Singing', 'Art', 'Photography', 'Tech'],
    level: 3,
    experiencePoints: 380,
    currentStreak: 4,
    longestStreak: 10,
    totalEventsJoined: 5,
    totalEventsCreated: 1,
    wellnessScore: 78,
    isOnline: true,
  },
  {
    id: 'sample_jayden_lee',
    email: 'jayden.lee@example.com',
    username: 'jaydenlee',
    displayName: 'Jayden Lee',
    avatar: 'üíª',
    bio: 'Full-stack dev. Hackathon junkie. Coffee-powered.',
    interests: ['Coding', 'Tech', 'Gaming', 'Startups', 'AI'],
    level: 8,
    experiencePoints: 1580,
    currentStreak: 30,
    longestStreak: 45,
    totalEventsJoined: 20,
    totalEventsCreated: 6,
    wellnessScore: 70,
    isOnline: false,
  },
  {
    id: 'sample_priya_raj',
    email: 'priya.raj@example.com',
    username: 'priyaraj',
    displayName: 'Priya Raj',
    avatar: 'üßò',
    bio: 'Meditation teacher & plant-based foodie. Spreading good vibes.',
    interests: ['Yoga', 'Meditation', 'Cooking', 'Volunteering', 'Reading'],
    level: 5,
    experiencePoints: 690,
    currentStreak: 21,
    longestStreak: 35,
    totalEventsJoined: 10,
    totalEventsCreated: 3,
    wellnessScore: 95,
    isOnline: true,
  },
  {
    id: 'sample_zack_wong',
    email: 'zack.wong@example.com',
    username: 'zackwong',
    displayName: 'Zack Wong',
    avatar: 'üé≠',
    bio: 'Theatre kid turned event organiser. Let\'s make memories!',
    interests: ['Theatre', 'Music', 'Photography', 'Board Games', 'Volunteering'],
    level: 6,
    experiencePoints: 940,
    currentStreak: 9,
    longestStreak: 20,
    totalEventsJoined: 14,
    totalEventsCreated: 5,
    wellnessScore: 82,
    isOnline: false,
  },
];

export async function seedSampleUsers(): Promise<number> {
  let seededCount = 0;

  for (const sample of SAMPLE_USERS) {
    const userRef = doc(db, COLLECTIONS.USERS, sample.id);
    const existing = await getDoc(userRef);
    if (existing.exists()) continue;

    await setDoc(userRef, {
      ...sample,
      accountType: AccountType.NORMAL,
      friendsCount: 0,
      followersCount: 0,
      followingCount: 0,
      moodHistory: [],
      lastSeen: new Date(),
      notificationSettings: {
        friendRequests: true,
        eventInvites: true,
        eventUpdates: true,
        messages: true,
        friendActivity: true,
        badges: true,
        missions: true,
        communityEvents: true,
        dailyReminders: true,
      },
      privacySettings: {
        profileVisibility: 'public',
        showOnlineStatus: true,
        showActivity: true,
        allowFriendRequests: 'everyone',
        showLocation: false,
      },
      createdAt: serverTimestamp(),
      updatedAt: serverTimestamp(),
    });

    seededCount++;
  }

  return seededCount;
}

export { SAMPLE_USERS };
